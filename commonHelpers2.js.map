{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["'use strict';\nconst formData = {\n  email: '',\n  message: '',\n};\n\nconst LOCAL_STORAGE_KEY = 'feedback-form-state';\n\nconst getStoredData = (keyname = LOCAL_STORAGE_KEY) => {\n  try {\n    const storedFormData = JSON.parse(localStorage.getItem(keyname)) || {};\n    return storedFormData;\n  } catch (err) {\n    return {};\n  }\n};\n\nconst storeData = (data, keyname = LOCAL_STORAGE_KEY) => {\n  localStorage.setItem(keyname, JSON.stringify(data));\n};\n\nconst isValidForm = formData => {\n  for (const fieldName of Object.keys(formData)) {\n    if (!formData[fieldName]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst preFillForm = (formElement, formData) => {\n  if (formElement) {\n    const elements = formElement.elements;\n    const storedFormData = getStoredData();\n\n    for (const element of elements) {\n      if (Object.keys(formData).includes(element.name)) {\n        const storedValue = storedFormData[element.name] || '';\n        if (storedValue) {\n          element.value = storedValue;\n          formData[element.name] = storedValue;\n        }\n      }\n    }\n  }\n};\n\nconst onSubmitHandler = formData => event => {\n  event.preventDefault();\n  if (!isValidForm(formData)) {\n    alert('Fill please all fields');\n  } else {\n    console.log(formData);\n    localStorage.removeItem(LOCAL_STORAGE_KEY);\n    event.target.reset();\n  }\n};\n\nconst onInputHandler = formData => event => {\n  const storedFormData = getStoredData();\n  const { name, value } = event.target;\n  const formattedValue = value.trim();\n\n  if (Object.keys(formData).includes(name)) {\n    storedFormData[name] = formattedValue;\n    formData[name] = formattedValue;\n    storeData(storedFormData);\n  }\n};\n\nconst feedbackForm = document.querySelector('.feedback-form');\npreFillForm(feedbackForm, formData);\n\nfeedbackForm.addEventListener('input', onInputHandler(formData));\nfeedbackForm.addEventListener('submit', onSubmitHandler(formData));\n"],"names":["formData","LOCAL_STORAGE_KEY","getStoredData","keyname","storeData","data","isValidForm","fieldName","preFillForm","formElement","elements","storedFormData","element","storedValue","onSubmitHandler","event","onInputHandler","name","value","formattedValue","feedbackForm"],"mappings":"wFACA,MAAMA,EAAW,CACf,MAAO,GACP,QAAS,EACX,EAEMC,EAAoB,sBAEpBC,EAAgB,CAACC,EAAUF,IAAsB,CACrD,GAAI,CAEF,OADuB,KAAK,MAAM,aAAa,QAAQE,CAAO,CAAC,GAAK,EAErE,MAAa,CACZ,MAAO,EACR,CACH,EAEMC,EAAY,CAACC,EAAMF,EAAUF,IAAsB,CACvD,aAAa,QAAQE,EAAS,KAAK,UAAUE,CAAI,CAAC,CACpD,EAEMC,EAAcN,GAAY,CAC9B,UAAWO,KAAa,OAAO,KAAKP,CAAQ,EAC1C,GAAI,CAACA,EAASO,CAAS,EACrB,MAAO,GAIX,MAAO,EACT,EAEMC,EAAc,CAACC,EAAaT,IAAa,CAC7C,GAAIS,EAAa,CACf,MAAMC,EAAWD,EAAY,SACvBE,EAAiBT,IAEvB,UAAWU,KAAWF,EACpB,GAAI,OAAO,KAAKV,CAAQ,EAAE,SAASY,EAAQ,IAAI,EAAG,CAChD,MAAMC,EAAcF,EAAeC,EAAQ,IAAI,GAAK,GAChDC,IACFD,EAAQ,MAAQC,EAChBb,EAASY,EAAQ,IAAI,EAAIC,EAE5B,CAEJ,CACH,EAEMC,EAAkBd,GAAYe,GAAS,CAC3CA,EAAM,eAAc,EACfT,EAAYN,CAAQ,GAGvB,QAAQ,IAAIA,CAAQ,EACpB,aAAa,WAAWC,CAAiB,EACzCc,EAAM,OAAO,SAJb,MAAM,wBAAwB,CAMlC,EAEMC,EAAiBhB,GAAYe,GAAS,CAC1C,MAAMJ,EAAiBT,IACjB,CAAE,KAAAe,EAAM,MAAAC,GAAUH,EAAM,OACxBI,EAAiBD,EAAM,OAEzB,OAAO,KAAKlB,CAAQ,EAAE,SAASiB,CAAI,IACrCN,EAAeM,CAAI,EAAIE,EACvBnB,EAASiB,CAAI,EAAIE,EACjBf,EAAUO,CAAc,EAE5B,EAEMS,EAAe,SAAS,cAAc,gBAAgB,EAC5DZ,EAAYY,EAAcpB,CAAQ,EAElCoB,EAAa,iBAAiB,QAASJ,EAAehB,CAAQ,CAAC,EAC/DoB,EAAa,iBAAiB,SAAUN,EAAgBd,CAAQ,CAAC"}