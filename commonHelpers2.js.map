{"version":3,"file":"commonHelpers2.js","sources":["../src/js/2-form.js"],"sourcesContent":["'use strict';\nconst formData = {\n  email: '',\n  message: '',\n};\n\nconst LOCAL_STORAGE_KEY = 'feedback-form-state';\n\nconst getStoredData = (keyname = LOCAL_STORAGE_KEY) => {\n  try {\n    const storedFormData = JSON.parse(localStorage.getItem(keyname)) || {};\n    return storedFormData;\n  } catch (err) {\n    return {};\n  }\n};\n\nconst isValidForm = formData => {\n  for (const fieldName of Object.keys(formData)) {\n    if (!formData[fieldName]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst preFillForm = (formElement, formData) => {\n  if (formElement) {\n    const elements = formElement.elements;\n    const storedFormData = getStoredData();\n\n    for (const element of elements) {\n      if (Object.keys(formData).includes(element.name)) {\n        const storedValue = storedFormData[element.name] || '';\n        if (storedValue) {\n          element.value = storedValue;\n          formData[element.name] = storedValue;\n        }\n      }\n    }\n  }\n};\n\nconst onSubmitHandler = formData => event => {\n  event.preventDefault();\n  if (!isValidForm(formData)) {\n    alert('Fill please all fields');\n  } else {\n    console.log(formData);\n    localStorage.removeItem(LOCAL_STORAGE_KEY);\n    event.target.reset();\n  }\n};\n\nconst onInputHandler = formData => event => {\n  const storedFormData = getStoredData();\n  if (Object.keys(formData).includes(event.target.name)) {\n    storedFormData[event.target.name] = event.target.value;\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storedFormData));\n    formData[event.target.name] = event.target.value;\n  }\n};\n\nconst feedbackForm = document.querySelector('.feedback-form');\npreFillForm(feedbackForm, formData);\n\nfeedbackForm.addEventListener('input', onInputHandler(formData));\nfeedbackForm.addEventListener('submit', onSubmitHandler(formData));\n"],"names":["formData","LOCAL_STORAGE_KEY","getStoredData","keyname","isValidForm","fieldName","preFillForm","formElement","elements","storedFormData","element","storedValue","onSubmitHandler","event","onInputHandler","feedbackForm"],"mappings":"wFACA,MAAMA,EAAW,CACf,MAAO,GACP,QAAS,EACX,EAEMC,EAAoB,sBAEpBC,EAAgB,CAACC,EAAUF,IAAsB,CACrD,GAAI,CAEF,OADuB,KAAK,MAAM,aAAa,QAAQE,CAAO,CAAC,GAAK,EAErE,MAAa,CACZ,MAAO,EACR,CACH,EAEMC,EAAcJ,GAAY,CAC9B,UAAWK,KAAa,OAAO,KAAKL,CAAQ,EAC1C,GAAI,CAACA,EAASK,CAAS,EACrB,MAAO,GAIX,MAAO,EACT,EAEMC,EAAc,CAACC,EAAaP,IAAa,CAC7C,GAAIO,EAAa,CACf,MAAMC,EAAWD,EAAY,SACvBE,EAAiBP,IAEvB,UAAWQ,KAAWF,EACpB,GAAI,OAAO,KAAKR,CAAQ,EAAE,SAASU,EAAQ,IAAI,EAAG,CAChD,MAAMC,EAAcF,EAAeC,EAAQ,IAAI,GAAK,GAChDC,IACFD,EAAQ,MAAQC,EAChBX,EAASU,EAAQ,IAAI,EAAIC,EAE5B,CAEJ,CACH,EAEMC,EAAkBZ,GAAYa,GAAS,CAC3CA,EAAM,eAAc,EACfT,EAAYJ,CAAQ,GAGvB,QAAQ,IAAIA,CAAQ,EACpB,aAAa,WAAWC,CAAiB,EACzCY,EAAM,OAAO,SAJb,MAAM,wBAAwB,CAMlC,EAEMC,EAAiBd,GAAYa,GAAS,CAC1C,MAAMJ,EAAiBP,IACnB,OAAO,KAAKF,CAAQ,EAAE,SAASa,EAAM,OAAO,IAAI,IAClDJ,EAAeI,EAAM,OAAO,IAAI,EAAIA,EAAM,OAAO,MACjD,aAAa,QAAQZ,EAAmB,KAAK,UAAUQ,CAAc,CAAC,EACtET,EAASa,EAAM,OAAO,IAAI,EAAIA,EAAM,OAAO,MAE/C,EAEME,EAAe,SAAS,cAAc,gBAAgB,EAC5DT,EAAYS,EAAcf,CAAQ,EAElCe,EAAa,iBAAiB,QAASD,EAAed,CAAQ,CAAC,EAC/De,EAAa,iBAAiB,SAAUH,EAAgBZ,CAAQ,CAAC"}